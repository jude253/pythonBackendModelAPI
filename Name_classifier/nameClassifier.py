import numpy as np

DIMS=500


pos, neg, posprob, negprob = 0.5,0.5,np.array([0.008305647840531562, 0.009966777408637873, 0.019933554817275746, 0.008305647840531562, 0.019933554817275746, 0.011627906976744186, 0.023255813953488372, 0.029900332225913623, 0.05149501661129568, 0.053156146179401995, 0.018272425249169437, 0.008305647840531562, 0.009966777408637873, 0.013289036544850499, 0.016611295681063124, 0.014950166112956811, 0.011627906976744186, 0.03488372093023256, 0.09302325581395349, 0.02159468438538206, 0.016611295681063124, 0.011627906976744186, 0.014950166112956811, 0.014950166112956811, 0.018272425249169437, 0.019933554817275746, 0.9983388704318937, 0.0033222591362126247, 0.013289036544850499, 0.061461794019933555, 0.03156146179401993, 0.0033222591362126247, 0.0049833887043189366, 0.029900332225913623, 0.0049833887043189366, 0.016611295681063124, 0.009966777408637873, 0.019933554817275746, 0.008305647840531562, 0.011627906976744186, 0.014950166112956811, 0.08471760797342193, 0.006644518272425249, 0.009966777408637873, 0.008305647840531562, 0.04152823920265781, 0.008305647840531562, 0.08637873754152824, 0.03156146179401993, 0.016611295681063124, 0.061461794019933555, 0.0049833887043189366, 0.009966777408637873, 0.009966777408637873, 0.008305647840531562, 0.011627906976744186, 0.011627906976744186, 0.014950166112956811, 0.036544850498338874, 0.08970099667774087, 0.0049833887043189366, 0.008305647840531562, 0.009966777408637873, 0.0049833887043189366, 0.0049833887043189366, 0.09800664451827243, 0.029900332225913623, 0.0033222591362126247, 0.008305647840531562, 0.009966777408637873, 0.009966777408637873, 0.0049833887043189366, 0.03488372093023256, 0.014950166112956811, 0.011627906976744186, 0.009966777408637873, 0.02823920265780731, 0.016611295681063124, 0.05813953488372093, 0.0049833887043189366, 0.016611295681063124, 0.06976744186046512, 0.011627906976744186, 0.0681063122923588, 0.009966777408637873, 0.019933554817275746, 0.026578073089700997, 0.018272425249169437, 0.0049833887043189366, 0.008305647840531562, 0.016611295681063124, 0.011627906976744186, 0.014950166112956811, 0.03322259136212625, 0.016611295681063124, 0.3438538205980066, 0.013289036544850499, 0.09966777408637874, 0.016611295681063124, 0.018272425249169437, 0.009966777408637873, 0.018272425249169437, 0.009966777408637873, 0.008305647840531562, 0.019933554817275746, 0.018272425249169437, 0.0049833887043189366, 0.013289036544850499, 0.008305647840531562, 0.016611295681063124, 0.0049833887043189366, 0.006644518272425249, 0.013289036544850499, 0.019933554817275746, 0.013289036544850499, 0.0033222591362126247, 0.013289036544850499, 0.006644518272425249, 0.0664451827242525, 0.009966777408637873, 0.008305647840531562, 0.013289036544850499, 0.018272425249169437, 0.061461794019933555, 0.009966777408637873, 0.008305647840531562, 0.009966777408637873, 0.014950166112956811, 0.02159468438538206, 0.0049833887043189366, 0.09634551495016612, 0.014950166112956811, 0.008305647840531562, 0.014950166112956811, 0.014950166112956811, 0.008305647840531562, 0.014950166112956811, 0.008305647840531562, 0.009966777408637873, 0.006644518272425249, 0.10963455149501661, 0.08803986710963455, 0.009966777408637873, 0.016611295681063124, 0.02159468438538206, 0.036544850498338874, 0.008305647840531562, 0.008305647840531562, 0.0016611295681063123, 0.011627906976744186, 0.009966777408637873, 0.011627906976744186, 0.006644518272425249, 0.009966777408637873, 0.0664451827242525, 0.023255813953488372, 0.008305647840531562, 0.02159468438538206, 0.009966777408637873, 0.1212624584717608, 0.013289036544850499, 0.009966777408637873, 0.0016611295681063123, 0.013289036544850499, 0.011627906976744186, 0.013289036544850499, 0.04152823920265781, 0.014950166112956811, 0.046511627906976744, 0.009966777408637873, 0.0016611295681063123, 0.016611295681063124, 0.036544850498338874, 0.024916943521594685, 0.02159468438538206, 0.029900332225913623, 0.016611295681063124, 0.011627906976744186, 0.0049833887043189366, 0.006644518272425249, 0.008305647840531562, 0.019933554817275746, 0.013289036544850499, 0.026578073089700997, 0.016611295681063124, 0.10299003322259136, 0.019933554817275746, 0.009966777408637873, 0.04983388704318937, 0.006644518272425249, 0.03322259136212625, 0.014950166112956811, 0.0049833887043189366, 0.0049833887043189366, 0.05813953488372093, 0.024916943521594685, 0.006644518272425249, 0.0049833887043189366, 0.10299003322259136, 0.0049833887043189366, 0.011627906976744186, 0.019933554817275746, 0.008305647840531562, 0.0049833887043189366, 0.023255813953488372, 0.014950166112956811, 0.014950166112956811, 0.008305647840531562, 0.018272425249169437, 0.036544850498338874, 0.0016611295681063123, 0.013289036544850499, 0.011627906976744186, 0.008305647840531562, 0.018272425249169437, 0.013289036544850499, 0.036544850498338874, 0.0033222591362126247, 0.0049833887043189366, 0.0049833887043189366, 0.029900332225913623, 0.023255813953488372, 0.008305647840531562, 0.011627906976744186, 0.019933554817275746, 0.024916943521594685, 0.008305647840531562, 0.1378737541528239, 0.10299003322259136, 0.011627906976744186, 0.03986710963455149, 0.011627906976744186, 0.04318936877076412, 0.009966777408637873, 0.02159468438538206, 0.061461794019933555, 0.05813953488372093, 0.019933554817275746, 0.019933554817275746, 0.12292358803986711, 0.018272425249169437, 0.0016611295681063123, 0.04152823920265781, 0.03322259136212625, 0.018272425249169437, 0.026578073089700997, 0.0946843853820598, 0.006644518272425249, 0.009966777408637873, 0.011627906976744186, 0.016611295681063124, 0.0016611295681063123, 0.023255813953488372, 0.011627906976744186, 0.009966777408637873, 0.013289036544850499, 0.008305647840531562, 0.016611295681063124, 0.013289036544850499, 0.02159468438538206, 0.013289036544850499, 0.011627906976744186, 0.014950166112956811, 0.03820598006644518, 0.011627906976744186, 0.013289036544850499, 0.011627906976744186, 0.029900332225913623, 0.05813953488372093, 0.019933554817275746, 0.009966777408637873, 0.013289036544850499, 0.0049833887043189366, 0.018272425249169437, 0.011627906976744186, 0.05813953488372093, 0.03156146179401993, 0.008305647840531562, 0.006644518272425249, 0.013289036544850499, 0.014950166112956811, 0.02823920265780731, 0.011627906976744186, 0.011627906976744186, 0.009966777408637873, 0.013289036544850499, 0.023255813953488372, 0.013289036544850499, 0.0049833887043189366, 0.016611295681063124, 0.014950166112956811, 0.008305647840531562, 0.013289036544850499, 0.016611295681063124, 0.04318936877076412, 0.02159468438538206, 0.02823920265780731, 0.008305647840531562, 0.0049833887043189366, 0.009966777408637873, 0.02159468438538206, 0.016611295681063124, 0.019933554817275746, 0.0033222591362126247, 0.03488372093023256, 0.026578073089700997, 0.024916943521594685, 0.1345514950166113, 0.03986710963455149, 0.014950166112956811, 0.011627906976744186, 0.026578073089700997, 0.008305647840531562, 0.07308970099667775, 0.0049833887043189366, 0.011627906976744186, 0.018272425249169437, 0.0033222591362126247, 0.03156146179401993, 0.013289036544850499, 0.013289036544850499, 0.013289036544850499, 0.006644518272425249, 0.02159468438538206, 0.008305647840531562, 0.014950166112956811, 0.08803986710963455, 0.011627906976744186, 0.024916943521594685, 0.006644518272425249, 0.11129568106312292, 0.006644518272425249, 0.013289036544850499, 0.008305647840531562, 0.009966777408637873, 0.0049833887043189366, 0.008305647840531562, 0.014950166112956811, 0.014950166112956811, 0.019933554817275746, 0.0033222591362126247, 0.008305647840531562, 0.011627906976744186, 0.006644518272425249, 0.016611295681063124, 0.019933554817275746, 0.009966777408637873, 0.013289036544850499, 0.011627906976744186, 0.009966777408637873, 0.019933554817275746, 0.02823920265780731, 0.018272425249169437, 0.016611295681063124, 0.014950166112956811, 0.013289036544850499, 0.0016611295681063123, 0.036544850498338874, 0.009966777408637873, 0.016611295681063124, 0.014950166112956811, 0.011627906976744186, 0.006644518272425249, 0.12624584717607973, 0.024916943521594685, 0.013289036544850499, 0.008305647840531562, 0.0681063122923588, 0.02159468438538206, 0.0033222591362126247, 0.011627906976744186, 0.08970099667774087, 0.006644518272425249, 0.0049833887043189366, 0.0033222591362126247, 0.0049833887043189366, 0.009966777408637873, 0.006644518272425249, 0.0049833887043189366, 0.013289036544850499, 0.019933554817275746, 0.008305647840531562, 0.008305647840531562, 0.0049833887043189366, 0.08637873754152824, 0.023255813953488372, 0.023255813953488372, 0.009966777408637873, 0.0016611295681063123, 0.016611295681063124, 0.013289036544850499, 0.009966777408637873, 0.013289036544850499, 0.03322259136212625, 0.0049833887043189366, 0.006644518272425249, 0.006644518272425249, 0.006644518272425249, 0.011627906976744186, 0.014950166112956811, 0.019933554817275746, 0.11960132890365449, 0.0033222591362126247, 0.019933554817275746, 0.053156146179401995, 0.008305647840531562, 0.006644518272425249, 0.011627906976744186, 0.014950166112956811, 0.0033222591362126247, 0.016611295681063124, 0.011627906976744186, 0.011627906976744186, 0.024916943521594685, 0.009966777408637873, 0.024916943521594685, 0.019933554817275746, 0.016611295681063124, 0.013289036544850499, 0.014950166112956811, 0.02159468438538206, 0.33554817275747506, 0.03488372093023256, 0.044850498338870434, 0.009966777408637873, 0.0664451827242525, 0.013289036544850499, 0.0033222591362126247, 0.016611295681063124, 0.008305647840531562, 0.018272425249169437, 0.013289036544850499, 0.02159468438538206, 0.009966777408637873, 0.0049833887043189366, 0.011627906976744186, 0.02159468438538206, 0.0664451827242525, 0.016611295681063124, 0.006644518272425249, 0.0033222591362126247, 0.006644518272425249, 0.009966777408637873, 0.009966777408637873, 0.07641196013289037, 0.023255813953488372, 0.011627906976744186, 0.036544850498338874, 0.014950166112956811, 0.011627906976744186, 0.013289036544850499, 0.018272425249169437, 0.023255813953488372, 0.023255813953488372, 0.018272425249169437, 0.006644518272425249, 0.009966777408637873, 0.009966777408637873, 0.019933554817275746, 0.016611295681063124, 0.02159468438538206, 0.03322259136212625, 0.013289036544850499, 0.024916943521594685, 0.054817275747508304, 0.0049833887043189366, 0.15282392026578073, 0.016611295681063124, 0.013289036544850499, 0.09136212624584718, 0.006644518272425249, 0.024916943521594685, 0.08471760797342193, 0.011627906976744186, 0.006644518272425249, 0.009966777408637873, 0.044850498338870434, 0.008305647840531562, 0.018272425249169437, 0.008305647840531562, 0.008305647840531562, 0.03820598006644518, 0.02159468438538206, 0.006644518272425249, 0.019933554817275746, 0.029900332225913623, 0.008305647840531562, 0.023255813953488372, 0.008305647840531562, 0.023255813953488372, 0.008305647840531562, 0.0049833887043189366, 0.046511627906976744, 0.019933554817275746, 0.016611295681063124, 0.011627906976744186, 0.011627906976744186, 0.006644518272425249, 0.046511627906976744, 0.013289036544850499]),np.array([0.011627906976744186, 0.014950166112956811, 0.011627906976744186, 0.008305647840531562, 0.0033222591362126247, 0.0049833887043189366, 0.03156146179401993, 0.011627906976744186, 0.024916943521594685, 0.03488372093023256, 0.019933554817275746, 0.023255813953488372, 0.016611295681063124, 0.013289036544850499, 0.014950166112956811, 0.013289036544850499, 0.018272425249169437, 0.02159468438538206, 0.1511627906976744, 0.006644518272425249, 0.006644518272425249, 0.006644518272425249, 0.008305647840531562, 0.013289036544850499, 0.019933554817275746, 0.02159468438538206, 0.9983388704318937, 0.016611295681063124, 0.0049833887043189366, 0.036544850498338874, 0.011627906976744186, 0.008305647840531562, 0.008305647840531562, 0.019933554817275746, 0.008305647840531562, 0.014950166112956811, 0.0033222591362126247, 0.008305647840531562, 0.0033222591362126247, 0.023255813953488372, 0.014950166112956811, 0.05813953488372093, 0.0016611295681063123, 0.0049833887043189366, 0.008305647840531562, 0.08305647840531562, 0.011627906976744186, 0.03820598006644518, 0.019933554817275746, 0.024916943521594685, 0.11295681063122924, 0.0049833887043189366, 0.0049833887043189366, 0.008305647840531562, 0.0016611295681063123, 0.023255813953488372, 0.008305647840531562, 0.009966777408637873, 0.006644518272425249, 0.029900332225913623, 0.0016611295681063123, 0.006644518272425249, 0.0049833887043189366, 0.006644518272425249, 0.013289036544850499, 0.16943521594684385, 0.019933554817275746, 0.006644518272425249, 0.023255813953488372, 0.008305647840531562, 0.008305647840531562, 0.044850498338870434, 0.006644518272425249, 0.02159468438538206, 0.019933554817275746, 0.018272425249169437, 0.013289036544850499, 0.029900332225913623, 0.029900332225913623, 0.011627906976744186, 0.019933554817275746, 0.036544850498338874, 0.011627906976744186, 0.024916943521594685, 0.008305647840531562, 0.026578073089700997, 0.036544850498338874, 0.009966777408637873, 0.018272425249169437, 0.008305647840531562, 0.0033222591362126247, 0.019933554817275746, 0.008305647840531562, 0.008305647840531562, 0.008305647840531562, 0.1461794019933555, 0.009966777408637873, 0.15780730897009967, 0.013289036544850499, 0.024916943521594685, 0.006644518272425249, 0.013289036544850499, 0.019933554817275746, 0.03156146179401993, 0.014950166112956811, 0.014950166112956811, 0.014950166112956811, 0.009966777408637873, 0.008305647840531562, 0.018272425249169437, 0.008305647840531562, 0.006644518272425249, 0.03820598006644518, 0.013289036544850499, 0.011627906976744186, 0.0049833887043189366, 0.014950166112956811, 0.0033222591362126247, 0.04817275747508306, 0.009966777408637873, 0.0033222591362126247, 0.006644518272425249, 0.014950166112956811, 0.09966777408637874, 0.029900332225913623, 0.011627906976744186, 0.009966777408637873, 0.024916943521594685, 0.013289036544850499, 0.0049833887043189366, 0.02159468438538206, 0.006644518272425249, 0.006644518272425249, 0.013289036544850499, 0.008305647840531562, 0.008305647840531562, 0.009966777408637873, 0.009966777408637873, 0.009966777408637873, 0.04983388704318937, 0.05647840531561462, 0.011627906976744186, 0.008305647840531562, 0.023255813953488372, 0.016611295681063124, 0.016611295681063124, 0.011627906976744186, 0.013289036544850499, 0.008305647840531562, 0.006644518272425249, 0.019933554817275746, 0.019933554817275746, 0.013289036544850499, 0.013289036544850499, 0.03488372093023256, 0.014950166112956811, 0.029900332225913623, 0.016611295681063124, 0.009966777408637873, 0.18604651162790697, 0.019933554817275746, 0.0049833887043189366, 0.0033222591362126247, 0.014950166112956811, 0.011627906976744186, 0.023255813953488372, 0.04152823920265781, 0.07308970099667775, 0.08139534883720931, 0.006644518272425249, 0.006644518272425249, 0.014950166112956811, 0.009966777408637873, 0.02159468438538206, 0.013289036544850499, 0.03820598006644518, 0.006644518272425249, 0.006644518272425249, 0.0049833887043189366, 0.009966777408637873, 0.006644518272425249, 0.013289036544850499, 0.006644518272425249, 0.014950166112956811, 0.008305647840531562, 0.16777408637873753, 0.013289036544850499, 0.011627906976744186, 0.026578073089700997, 0.013289036544850499, 0.008305647840531562, 0.011627906976744186, 0.009966777408637873, 0.013289036544850499, 0.023255813953488372, 0.0049833887043189366, 0.011627906976744186, 0.009966777408637873, 0.07641196013289037, 0.013289036544850499, 0.009966777408637873, 0.013289036544850499, 0.011627906976744186, 0.008305647840531562, 0.05813953488372093, 0.018272425249169437, 0.008305647840531562, 0.006644518272425249, 0.04817275747508306, 0.023255813953488372, 0.0033222591362126247, 0.008305647840531562, 0.009966777408637873, 0.006644518272425249, 0.0049833887043189366, 0.011627906976744186, 0.06976744186046512, 0.006644518272425249, 0.0033222591362126247, 0.014950166112956811, 0.03820598006644518, 0.036544850498338874, 0.0049833887043189366, 0.008305647840531562, 0.018272425249169437, 0.03322259136212625, 0.009966777408637873, 0.08637873754152824, 0.0681063122923588, 0.016611295681063124, 0.036544850498338874, 0.0033222591362126247, 0.018272425249169437, 0.014950166112956811, 0.011627906976744186, 0.03156146179401993, 0.014950166112956811, 0.013289036544850499, 0.02159468438538206, 0.11794019933554817, 0.014950166112956811, 0.0049833887043189366, 0.0049833887043189366, 0.009966777408637873, 0.03488372093023256, 0.41029900332225916, 0.008305647840531562, 0.009966777408637873, 0.011627906976744186, 0.009966777408637873, 0.0049833887043189366, 0.0049833887043189366, 0.0033222591362126247, 0.009966777408637873, 0.014950166112956811, 0.019933554817275746, 0.023255813953488372, 0.02159468438538206, 0.019933554817275746, 0.008305647840531562, 0.023255813953488372, 0.009966777408637873, 0.009966777408637873, 0.029900332225913623, 0.0033222591362126247, 0.011627906976744186, 0.018272425249169437, 0.02159468438538206, 0.09136212624584718, 0.019933554817275746, 0.008305647840531562, 0.008305647840531562, 0.018272425249169437, 0.018272425249169437, 0.009966777408637873, 0.03322259136212625, 0.03488372093023256, 0.014950166112956811, 0.011627906976744186, 0.018272425249169437, 0.011627906976744186, 0.019933554817275746, 0.014950166112956811, 0.016611295681063124, 0.023255813953488372, 0.008305647840531562, 0.014950166112956811, 0.014950166112956811, 0.014950166112956811, 0.008305647840531562, 0.014950166112956811, 0.011627906976744186, 0.016611295681063124, 0.03488372093023256, 0.019933554817275746, 0.009966777408637873, 0.0681063122923588, 0.013289036544850499, 0.009966777408637873, 0.019933554817275746, 0.011627906976744186, 0.03322259136212625, 0.016611295681063124, 0.0049833887043189366, 0.03986710963455149, 0.011627906976744186, 0.024916943521594685, 0.08471760797342193, 0.04983388704318937, 0.029900332225913623, 0.0049833887043189366, 0.006644518272425249, 0.0049833887043189366, 0.08637873754152824, 0.013289036544850499, 0.006644518272425249, 0.019933554817275746, 0.0033222591362126247, 0.006644518272425249, 0.009966777408637873, 0.05813953488372093, 0.0049833887043189366, 0.008305647840531562, 0.011627906976744186, 0.008305647840531562, 0.009966777408637873, 0.06478405315614617, 0.011627906976744186, 0.008305647840531562, 0.009966777408637873, 0.03820598006644518, 0.008305647840531562, 0.02159468438538206, 0.011627906976744186, 0.013289036544850499, 0.013289036544850499, 0.011627906976744186, 0.41029900332225916, 0.006644518272425249, 0.12956810631229235, 0.006644518272425249, 0.014950166112956811, 0.0033222591362126247, 0.009966777408637873, 0.011627906976744186, 0.006644518272425249, 0.011627906976744186, 0.02823920265780731, 0.016611295681063124, 0.009966777408637873, 0.006644518272425249, 0.009966777408637873, 0.019933554817275746, 0.023255813953488372, 0.009966777408637873, 0.011627906976744186, 0.013289036544850499, 0.036544850498338874, 0.013289036544850499, 0.018272425249169437, 0.0033222591362126247, 0.0033222591362126247, 0.009966777408637873, 0.20764119601328904, 0.008305647840531562, 0.013289036544850499, 0.006644518272425249, 0.09302325581395349, 0.026578073089700997, 0.0033222591362126247, 0.019933554817275746, 0.06312292358803986, 0.04983388704318937, 0.014950166112956811, 0.014950166112956811, 0.02159468438538206, 0.008305647840531562, 0.009966777408637873, 0.024916943521594685, 0.0033222591362126247, 0.016611295681063124, 0.008305647840531562, 0.0033222591362126247, 0.009966777408637873, 0.044850498338870434, 0.014950166112956811, 0.009966777408637873, 0.006644518272425249, 0.006644518272425249, 0.019933554817275746, 0.02159468438538206, 0.008305647840531562, 0.006644518272425249, 0.03986710963455149, 0.008305647840531562, 0.016611295681063124, 0.0033222591362126247, 0.006644518272425249, 0.006644518272425249, 0.0049833887043189366, 0.024916943521594685, 0.18438538205980065, 0.008305647840531562, 0.018272425249169437, 0.03986710963455149, 0.0016611295681063123, 0.03986710963455149, 0.013289036544850499, 0.006644518272425249, 0.0049833887043189366, 0.009966777408637873, 0.011627906976744186, 0.014950166112956811, 0.009966777408637873, 0.013289036544850499, 0.018272425249169437, 0.026578073089700997, 0.014950166112956811, 0.009966777408637873, 0.009966777408637873, 0.05647840531561462, 0.14451827242524917, 0.013289036544850499, 0.04983388704318937, 0.013289036544850499, 0.07475083056478406, 0.016611295681063124, 0.008305647840531562, 0.014950166112956811, 0.0049833887043189366, 0.008305647840531562, 0.009966777408637873, 0.013289036544850499, 0.009966777408637873, 0.008305647840531562, 0.0049833887043189366, 0.008305647840531562, 0.07807308970099668, 0.009966777408637873, 0.009966777408637873, 0.006644518272425249, 0.009966777408637873, 0.023255813953488372, 0.008305647840531562, 0.046511627906976744, 0.019933554817275746, 0.006644518272425249, 0.07973421926910298, 0.006644518272425249, 0.006644518272425249, 0.04152823920265781, 0.0049833887043189366, 0.014950166112956811, 0.023255813953488372, 0.014950166112956811, 0.006644518272425249, 0.006644518272425249, 0.011627906976744186, 0.014950166112956811, 0.016611295681063124, 0.009966777408637873, 0.03322259136212625, 0.009966777408637873, 0.016611295681063124, 0.024916943521594685, 0.008305647840531562, 0.04817275747508306, 0.009966777408637873, 0.013289036544850499, 0.044850498338870434, 0.013289036544850499, 0.02823920265780731, 0.09800664451827243, 0.029900332225913623, 0.0049833887043189366, 0.0049833887043189366, 0.03820598006644518, 0.013289036544850499, 0.018272425249169437, 0.018272425249169437, 0.02159468438538206, 0.03488372093023256, 0.014950166112956811, 0.006644518272425249, 0.006644518272425249, 0.054817275747508304, 0.016611295681063124, 0.03820598006644518, 0.018272425249169437, 0.013289036544850499, 0.014950166112956811, 0.008305647840531562, 0.026578073089700997, 0.0049833887043189366, 0.023255813953488372, 0.029900332225913623, 0.014950166112956811, 0.008305647840531562, 0.05647840531561462, 0.006644518272425249])



def hashfeatures(baby, B, FIX):
    v = np.zeros(B)
    for m in range(FIX):
        featurestring = "prefix" + baby[:m]
        v[hash(featurestring) % B] = 1
        featurestring = "suffix" + baby[-1 * m:]
        v[hash(featurestring) % B] = 1
        featurestring = "firstLetter" + baby[0]
        v[hash(featurestring) % B] = 1
        featurestring = "lastLetter" + baby[-1]
        v[hash(featurestring) % B] = 1

    return v


def name2features(filename, B=128, FIX=5, LoadFile=True):
    """
    Output:
        X : n feature vectors of dimension B, (nxB)
    """
    # read in baby names
    if LoadFile:
        with open(filename, 'r') as f:
            babynames = [x.rstrip() for x in f.readlines() if len(x) > 0]
    else:
        babynames = filename.split('\n')
    n = len(babynames)
    X = np.zeros((n, B))
    for i in range(n):
        X[i, :] = hashfeatures(babynames[i], B, FIX)

    # YOUR CODE HERE
    return X

def naivebayes_pred(pos, neg, posprob, negprob, X_test):
    """
    naivebayes_pred(pos, neg, posprob, negprob, X_test) returns the prediction of each point in X_test
    
    Input:
        pos: class probability for the negative class
        neg: class probability for the positive class
        posprob: conditional probabilities for the positive class (d)
        negprob: conditional probabilities for the negative class (d)
        X_test : features (nxd)
    
    Output:
        prediction of each point in X_test (n)
    """
    n, d = X_test.shape
    
    preds = np.zeros(n)
    
    Theta_1_pos_1 = posprob.copy()
    Theta_0_pos_1 = np.ones(d)-Theta_1_pos_1
    
    Theta_1_neg_1 = negprob.copy()
    Theta_0_neg_1 = np.ones(d)-Theta_1_neg_1
    
    
    Theta_1_pos_1 = np.log(Theta_1_pos_1)
    Theta_0_pos_1 = np.log(Theta_0_pos_1)
    
    Theta_0_neg_1 = np.log(Theta_0_neg_1)
    Theta_1_neg_1 = np.log(Theta_1_neg_1)
    
    log_y_pos = np.log(pos)
    log_y_neg = np.log(neg)
    
    #print(Theta_1_pos_1,Theta_0_pos_1)
    #print(Theta_1_neg_1,Theta_0_neg_1)
    
    for i in range(n):
        xi = X_test[i,:] #xi vector/row
        
        # the log likelihoods of xTestA = 1 + log likelihoods of xTestA = 0 + log likelihood of y=1
        log_pos = np.dot(xi,Theta_1_pos_1) + np.dot((-1*xi+np.ones(d)),Theta_0_pos_1) + log_y_pos
        
        # the log likelihoods of xTestA = 1 + log likelihoods of xTestA = 0 + log likelihood of y=-1
        log_neg = np.dot(xi,Theta_1_neg_1) + np.dot((-1*xi+np.ones(d)),Theta_0_neg_1) + log_y_neg
        #added this print statement in because sometimes this is where math sometimes seems to not work correctly
        #It seems like for some reason when I put this comment here, the math works.  It might be a rounding error
        #I might do the final math somewhere else to ensure it is not rounded off or something.
        print(log_pos,log_neg)
        log_ratio = log_pos - log_neg
        
        if log_ratio > 0:
            preds[i] = 1
        else:
            preds[i] = -1
    
    return preds

def name_classifier(name):
    xtest = name2features(name.capitalize(), B=DIMS, LoadFile=False)
    pred = naivebayes_pred(pos, neg, posprob, negprob, xtest)
    response = {}
    print(pred)
    if pred > 0:
        response["prediction"]= "male"
    else:
        response["prediction"]= "female"

    return response
