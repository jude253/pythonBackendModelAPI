{% extends 'base.html' %}

{% block title %}Jude Capachietti's website{% endblock %}
{% block meta_description %}Learn about Jude Capachietti, see his portfolio and more.{% endblock %}

{% block body %}
  <!-- Page content -->
  <div class="w3-content fixed-bg" style="max-width:2000px;margin-top:46px;">

      <div class="w3-container w3-content w3-center w3-padding-64" style="max-width:800px;" id="jude">
          <h1 class="w3-wide"><b><i>Exercise Tracker</i></b></h1>

        <p><i>This video is a demo of the current project I am working on for Olympus AI. The number in the
        upper left shows what stage of the exercise the user is in.</i></p>
        <br>
        <div class="w3-content w3-padding-32 grad" style="max-width:700px;">
            <iframe width="560" height="315" src="https://www.youtube.com/embed/SevzLANELuI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
        <div class="w3-row w3-padding-32">
            <div class="w3-center">
                <p class="w3-justify">
                    <i>How does this work?</i>
                    <br>
                    <br>
                    It works by using a pose estimation model from Google's mediapipe package, then running the
                    coordinates of the user's body parts through a neural network.  This network was trained on more
                    than 6,000 exercise photos generated by me.  If you would like to try out this technology, you can.
                    If you have google chrome and a webcam, you can try <a href="https://judecapachietti.com/webcamHands">this</a>
                    out.  This classifier is trained to recoginise the "ok" hand gesture.  It is not perfect, but it is
                    in development.
                </p>
            </div>

        </div>

      </div>

    <!-- End Page Content -->
    </div>

    <style>
        body {font-family: "Lato", sans-serif}
<!--        .grad {-->
<!--            background-image: linear-gradient(60deg, #6600cc, #ff0066);-->
<!--            opacity: 0.95;-->
<!--        }-->
        #femaleBar {background: rgb(0, 0, 0)}
        #maleBar {background: rgba(0, 0, 0, .5)}
        #negBar {background: rgb(0, 0, 0)}
        #posBar {background: rgba(0, 0, 0, .5)}
        .alignleft {
            float: left;
        }
        .alignright {
            float: right;
        }
        h1{color:white}
        h5{color:white}
        p {color:white}
        body {
            /*changed the background to gradient from image*/
            background-image: linear-gradient(240deg, #6600cc, #ff0066);
            background-color: #6600cc;
<!--          /* The background image */-->
<!--          background-image: url('{{ url_for('static', filename='images/nn.jpeg') }}');-->

<!--          /* Set a specified height, or the minimum height for the background image */-->
<!--          min-height: 500px;-->

<!--          /* Set background image to fixed (don't scroll along with the page) */-->
<!--          background-attachment: fixed;-->

<!--          /* Center the background image */-->
<!--          background-position: center;-->

<!--          /* Set the background image to no repeat */-->
<!--          background-repeat: no-repeat;-->

<!--          /* Scale the background image to be as large as possible */-->
<!--          background-size: cover;-->
        }
    </style>



    <script>
<!--    classifier api call logic-->
    function callClassifier() {
      var textInputString = document.getElementById("textInput").value;
      axios.post('/api/textAnalysis',{textInput: textInputString})
            .then(response => {
<!--                console.log(response.data);-->
                document.getElementById("genderPrediction").innerHTML = 'Gender: ' + response.data["predictions"]["gender"]["prediction"]
                document.getElementById("agePrediction").innerHTML = 'Age: ' + response.data["predictions"]["age"]["prediction"]
                document.getElementById("tonePrediction").innerHTML = 'Tone: ' + response.data["predictions"]["tone"]["prediction"]
                document.getElementById("certFemale").innerHTML = 'f:' + response.data["predictions"]["gender"]["certainty"]["female"]
                document.getElementById("certMale").innerHTML = 'm:' + response.data["predictions"]["gender"]["certainty"]["male"]
                document.getElementById("certNeg").innerHTML = '-:' + response.data["predictions"]["tone"]["certainty"]["negative"]
                document.getElementById("certPos").innerHTML = '+:' + response.data["predictions"]["tone"]["certainty"]["positive"]
                move(response.data["predictions"]["gender"]["certainty"]["female"],"femaleBar")
                move(response.data["predictions"]["tone"]["certainty"]["negative"],"negBar")
            })
            .catch(error => console.error(error));
    }
<!--    word count logic-->
    var input = document.querySelectorAll('textarea')[0];
    input.addEventListener('keyup', function() {

      // word counter logic
        var words = input.value.match(/\b[-?(\w+)?]+\b/gi);
        if(words === null){
            document.getElementById("wordCount").innerHTML = 0
        }
        else {
            document.getElementById("wordCount").innerHTML = words.length
        }
    });

    // Used to toggle the menu on small screens when clicking on the menu button
    function myFunction() {
      var x = document.getElementById("navDemo");
      if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
      } else {
        x.className = x.className.replace(" w3-show", "");
      }
    }

<!--    sliding graph update-->
    function move(femaleBarPercent,id) {
      var elem = document.getElementById(id);
      var width = 1;
      var id = setInterval(frame, 1);
      function frame() {
        if (width >= 100) {
          clearInterval(id);
        } else {
          width++;
          elem.style.width = femaleBarPercent;
        }
      }
    }

    </script>
{% endblock %}